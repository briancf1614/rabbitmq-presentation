<div class="main-container">
  <div class="generator-card">
    
    <header class="card-header">
      <h1>âš¡ Generatore Asincrono</h1>
      <p class="subtitle">Potenziato da Microservizi & RabbitMQ</p>
      
      <div class="architecture-visual">
        <div class="arch-node angular" title="Frontend">ğŸ…°ï¸<br>Angular</div>
        <div class="arch-arrow">â†’</div>
        <div class="arch-node api" title="Producer">ğŸ”Œ<br>API .NET</div>
        <div class="arch-arrow">â†’</div>
        <div class="arch-node rabbit" title="Message Broker">ğŸ‡<br>RabbitMQ</div>
        <div class="arch-arrow">â†’</div>
        <div class="arch-node worker" title="Consumer">ğŸ¤–<br>Worker</div>
      </div>
    </header>

    <main class="card-body">
      <form (ngSubmit)="submitRequest()">
        
        <div class="form-group floating-label">
          <input
            type="text"
            id="prompt"
            class="form-control"
            [(ngModel)]="generationRequest.prompt"
            required
            placeholder=" " >
          <label for="prompt">âœ¨ Descrivi l'immagine dei tuoi sogni...</label>
        </div>

        <div class="form-row">
          <div class="form-group col-half">
            <label for="quantity" class="static-label">ğŸ”¢ QuantitÃ </label>
            <input
              type="number"
              id="quantity"
              class="form-control number-input"
              [(ngModel)]="generationRequest.quantity"
              min="1"
              max="10"
            >
          </div>

          <div class="form-group col-half checkbox-group">
             <label class="custom-checkbox-container">
                <input 
                  type="checkbox" 
                  [(ngModel)]="generationRequest.addExtraEffect"
                >
                <span class="checkmark"></span>
                ğŸŒŸ Applica Filtro "Cyberpunk"
             </label>
          </div>
        </div>

        <button type="submit" class="btn-submit glow-on-hover" [disabled]="isLoading || !generationRequest.prompt" [ngClass]="{'loading': isLoading}">
          <span *ngIf="!isLoading">ğŸš€ Invia alla Coda</span>
          <span *ngIf="isLoading">
             <span class="spinner"></span> Elaborazione in corso...
          </span>
        </button>
      </form>

      <div *ngIf="message" class="status-message" [ngClass]="{'success': !isLoading, 'info': isLoading}">
        {{ message }}
      </div>
    </main>
  </div>

  <section class="results-section mt-5">
    <h2>ğŸ¨ Galleria Risultati (Volume Condiviso)</h2>
    <div class="results-placeholder">
      <div class="placeholder-icon">ğŸ–¼ï¸</div>
      <p>Le immagini generate dal Worker appariranno qui.</p>
      <p class="small">In attesa di segnale dal backend...</p>
    </div>
  </section>
</div>